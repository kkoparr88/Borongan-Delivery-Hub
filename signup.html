<script>
  // Your Web App URL
  const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbzIS7vSXAQq8YR1Tqnm1EmFKOMMM0cWxy7bRww06slWJv39vsBxr87F0NP0xbU_uWhj/exec";

  function signup() {
    const errorDiv = document.getElementById("error");
    const btn = document.querySelector("button");
    
    errorDiv.textContent = "";

    // Get values from your specific IDs
    const payload = {
      name: document.getElementById("name").value.trim(),
      email: document.getElementById("email").value.trim(),
      messenger: document.getElementById("messenger").value.trim(),
      phone: document.getElementById("contact").value.trim(),
      address: document.getElementById("address").value.trim(),
      password: document.getElementById("password").value.trim()
    };

    // Validation
    if (!payload.name || !payload.email || !payload.messenger || !payload.phone || !payload.address || !payload.password) {
      errorDiv.textContent = "Please fill in all fields.";
      return;
    }

    btn.disabled = true;
    btn.innerText = "Processing...";

    // Use a simple fetch that doesn't try to "read" the response
    fetch(SCRIPT_URL, {
      method: "POST",
      mode: "no-cors", // This tells the browser: "Just send it, don't worry about the answer"
      cache: "no-cache",
      headers: {
        "Content-Type": "text/plain"
      },
      body: JSON.stringify(payload)
    })
    .then(() => {
      // Because of 'no-cors', we don't wait for data. 
      // If fetch finishes without an error, the data was sent.
      alert("Registration Successful! Your account is now pending for admin review.");
      window.location.href = "login.html";
    })
    .catch((err) => {
      console.error(err);
      errorDiv.textContent = "Submission failed. Check your internet.";
      btn.disabled = false;
      btn.innerText = "Sign Up";
    });
  }
</script>
