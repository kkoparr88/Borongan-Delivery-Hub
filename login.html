<script>
const SCRIPT_URL =
  "https://script.google.com/macros/s/AKfycbzKNZykX5pLbNdjkTZu1brXY8LcovIhxATQpjlJpmEwOoWS0kflxGAhrHHsmFINzkxT/exec";

function login() {
  const errorBox = document.getElementById("error");
  errorBox.textContent = "";

  const email = document.getElementById("email").value.trim();
  const password = document.getElementById("password").value.trim();

  if (!email || !password) {
    errorBox.textContent = "Please enter both email and password.";
    return;
  }

  const xhr = new XMLHttpRequest();
  xhr.open("POST", SCRIPT_URL, true);

  xhr.onload = function () {
    try {
      const data = JSON.parse(xhr.responseText);

      if (data.success) {
        localStorage.setItem("customer", JSON.stringify(data.customer));
        window.location.replace("./");
      } else {
        errorBox.textContent = data.message;
      }
    } catch (e) {
      errorBox.textContent = "Invalid server response.";
    }
  };

  xhr.onerror = function () {
    errorBox.textContent = "Network error.";
  };

  xhr.send(JSON.stringify({
    action: "login",
    email: email,
    password: password
  }));
}
</script>

