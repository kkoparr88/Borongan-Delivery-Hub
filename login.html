<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Borongan Delivery Hub | Login</title>

  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins&display=swap');
    * { box-sizing: border-box; margin:0; padding:0; font-family:'Poppins', sans-serif; }
    body { background: linear-gradient(135deg, #0d2a3a, #1b4f72); min-height:100vh; display:flex; justify-content:center; align-items:center; color:#fff; }
    .login-box { background-color:#0a1f2e; padding:30px 35px; border-radius:12px; width:320px; box-shadow:0 4px 15px rgba(0,170,255,0.3); }
    .login-box h2 { text-align:center; margin-bottom:25px; font-weight:600; font-size:24px; }
    .input-group { margin-bottom:18px; display:flex; flex-direction:column; }
    .input-group label { margin-bottom:6px; font-size:14px; color:#aad4ff; }
    input[type="email"], input[type="password"] { padding:10px 12px; font-size:15px; border-radius:6px; border:none; background-color:#163545; color:#ddd; }
    button { width:100%; padding:12px; background: linear-gradient(90deg, #00aaff, #0077cc); border:none; border-radius:8px; color:white; font-weight:600; font-size:16px; cursor:pointer; margin-top:10px; }
    .signup-btn { margin-top:15px; background:#0a1f2e; border:2px solid #00aaff; color:#00aaff; }
    .error { margin-top:12px; font-size:14px; color:#ff8080; text-align:center; min-height:18px; }
  </style>
</head>

<body>
  <div class="login-box">
    <h2>Customer Login</h2>

    <div class="input-group">
      <label>Email</label>
      <input id="email" type="email" />
    </div>

    <div class="input-group">
      <label>Password</label>
      <input id="password" type="password" />
    </div>

    <button onclick="login()">Login</button>
    <button class="signup-btn" onclick="location.href='signup.html'">Sign Up</button>

    <div id="error" class="error"></div>
  </div>

<script>
const SCRIPT_URL = "YOUR_DEPLOYED_WEB_APP_URL";

function login() {
  const errorBox = document.getElementById("error");
  errorBox.textContent = "";

  const email = document.getElementById("email").value.trim();
  const password = document.getElementById("password").value.trim();

  if (!email || !password) {
    errorBox.textContent = "Please enter both email and password.";
    return;
  }

  const xhr = new XMLHttpRequest();
  xhr.open("POST", SCRIPT_URL, true);

  xhr.onload = function () {
    try {
      const data = JSON.parse(xhr.responseText);
      if (data.success) {
        localStorage.setItem("customer", JSON.stringify(data.customer));
        window.location.replace("./");
      } else {
        errorBox.textContent = data.message;
      }
    } catch(e) {
      errorBox.textContent = "Invalid server response.";
    }
  };

  xhr.onerror = function () {
    errorBox.textContent = "Network error.";
  };

  xhr.send(JSON.stringify({
    action: "login",
    email: email,
    password: password
  }));
}
</script>
</body>
</html>
